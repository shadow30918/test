var RuleTabNumber=8;var siteName=location.href.split("/").filter(function(a){return a.trim().length>0}).pop();var pageName=(window.location.pathname.split("/").pop()==="")?"index":window.location.pathname.split("/").pop().split(".").shift();var windowWidth=0,windowHeight=0;var isMobile=(navigator.userAgent.match(/Android|iPhone|iPad/i)===null)?false:true;var reHttp=/^http/i;var eventCode="";var home,rule,login,processes,product,winner,faq,extra1,extra2,rule_title;var i,j;$(function(){if(isMobile){if(pageName===""||pageName==="index"){window.location.href="mobile/"}else{if(getUrlParam("spec")){var a=getUrlParam("spec");window.location.href="mobile/"+pageName+".html?spec="+a}else{window.location.href="mobile/"+pageName+".html"}}}else{getWindowSize();$("body").attr("page",pageName);$("#Header #Menu li[data-link="+pageName+"]").addClass("select");$("#Header #Logo").on("click",function(){GEvent("Logo");window.open("http://www.lg.com/tw","_blank")});$.post("func.php",{func:"getEvent"},function(c){if(c.event.length===1){$("#Mask").hide();eventCode=c.eventcode;$("#Header #Menu").empty();for(var b=0;b<c.event[0].menu.length;b++){if(c.event[0].menu[b].show==="1"){if(c.event[0].menu[b].title==="product"||c.event[0].menu[b].title==="extra2"){$("#Header .container #Menu").append('<li class="bu" data-window="'+c.event[0].menu[b].window+'" data-link="'+c.event[0].menu[b].url+'"><span>'+c.event[0].menu[b].name+"</span></li>")}else{$("#Header .container #Menu").append('<li class="bu" data-link="'+c.event[0].menu[b].title+'"><span>'+c.event[0].menu[b].name+"</span></li>")}switch(c.event[0].menu[b].main){case"home":home=b;break;case"rule":rule=b;break;case"login":login=b;break;case"process":processes=b;break;case"product":product=b;break;case"winner":winner=b;break;case"faq":faq=b;break;case"extra1":extra1=b;break;case"extra2":extra2=b;break}}}$("#Header .container #Menu").append('<li class="bu" data-link="https://www.facebook.com/LGTaiwan/"><span><img class="imgFullSizeH" src="../../common_img/fb.svg" /></span></li>');$("#Header #Menu li").on("click",function(){if($(this).is(":last-child")){GEvent("Menu-FB");window.open($(this).data("link"),"_blank")}else{GEvent("Menu-"+$(this).text());if($(this).data("link").match(reHttp)){if($(this).data("window")==="1"){window.open($(this).data("link"),"_blank")}else{window.open($(this).data("link"),"_self")}}else{switch($(this).data("link")){case"login":if(toNumber(c.event[0].menu[login].show)===1){window.location.href=$(this).data("link")+".html"}else{alert("目前無法進行兌換登入！")}break;case"process":if(toNumber(c.event[0].menu[processes].show)===1){window.location.href=$(this).data("link")+".html"}else{alert("目前無法進行進度查詢！")}break;case"winner":if(toNumber(c.event[0].menu[winner].show)===1){if(!(c.event[0].menu[winner].msg==="")){alert(c.event[0].menu[winner].msg)}else{window.location.href=$(this).data("link")+".html"}}break;default:if($(this).data("link").length>0){window.location.href=$(this).data("link")+".html"}break}}}});if(pageName==="index"){$("#Content .container #EventImg").empty();$("#Content .container #EventImg").append('<img src="../../img/'+c.event[0].desk_img+'" />');$("#Content .container #BU_Login ").on("click",function(){window.open("http://www.lg.com/tw/support/product-registration")})}if(pageName==="rule"||pageName==="winner"){$.post("func.php",{func:"getPage",type:pageName},function(e){var f=e.info;$("#Content .container #SubMenu").empty();$.each(f,function(g,h){if(pageName==="rule"){switch(h.title){case"新品":rule_title="new";break;case"電視":rule_title="tv";break;case"冰箱":rule_title="ref";break;case"洗衣機 / 其它":rule_title="other";break;case"買就送":rule_title="gift";break;case"買再登錄抽":rule_title="lottery";break}$("#Content .container #SubMenu").append('<li class="bu unselect" style="background-color:'+h.color+'" data-title="'+rule_title+'" data-img="'+h.desk_img+'"><p>'+h.title+"</p></li>")}else{$("#Content .container #SubMenu").append('<li class="bu unselect" style="background-color:'+h.color+'" data-img="'+h.desk_img+'"><p>'+h.title+"</p></li>")}});$("#Content .container #SubMenu li, #Content .container #SubMenu li p").css({width:Math.floor($(".container").width()/((f.length>RuleTabNumber)?RuleTabNumber:f.length)-1)});$("#Content .container #SubMenu li:last-child").css({"margin-right":"0",width:($("#Content .container #SubMenu li:last-child").width()+1)+"px"});if(f.length>RuleTabNumber){for(i=1;i<Math.ceil(f.length/RuleTabNumber);i++){$("<br/>").insertAfter("#Content .container #SubMenu li:nth-child("+(f.length-RuleTabNumber*i)+")")}}else{$("#Content .container #SubMenu li").css("margin-bottom","-2px")}$("#Content .container #SubMenu li:first-child").removeClass("unselect").addClass("select");$("#Content .container #Img").empty();$("#Content .container #Img").append('<img src="../../img/'+$("#Content .container #SubMenu li:first-child").data("img")+'"/>');if(toNumber($("#Content .container #Link").data("page"))===5){$("#Content .container #Link").addClass("show")}$("#Content .container #SubMenu li").on("mouseenter mouseleave click ",function(g){switch(g.type){case"mouseenter":if(!$(this).hasClass("select")){$(this).removeClass("unselect")}break;case"mouseleave":if(!$(this).hasClass("select")){$(this).addClass("unselect")}break;case"click":$("#Content .container #SubMenu li").removeClass("select").addClass("unselect");$(this).removeClass("unselect").addClass("select");$("#Content .container #Img").empty();$("#Content .container #Img").append('<img src="../../img/'+$(this).data("img")+'"/>');if(toNumber($("#Content .container #Link").data("page"))===toNumber($(this).index())){$("#Content .container #Link").addClass("show")}else{$("#Content .container #Link").removeClass("show")}GEvent("Tab-"+$(this).text());break}});if(getUrlParam("spec")){var d=getUrlParam("spec");$("#Content .container #SubMenu li").removeClass("select").addClass("unselect");$('#Content .container #SubMenu li[data-title="'+d+'"]').removeClass("unselect").addClass("select");$("#Content .container #Img").empty();$("#Content .container #Img").append('<img src="../../img/'+$('#Content .container #SubMenu li[data-title="'+d+'"]').data("img")+'"/>');if(toNumber($("#Content .container #Link").data("page"))===toNumber($('#Content .container #SubMenu li[data-title="'+d+'"]').index())){$("#Content .container #Link").addClass("show");$("#Content .container #Link #Link_4").on("click",function(){$("#remind").show();remindShow()})}else{$("#Content .container #Link").removeClass("show")}}},"json")}if(pageName==="faq"||pageName==="fbcheckin"){$.post("func.php",{func:"getPage",type:pageName},function(d){$("#Content .container #Img").empty();$("#Content .container #Img").append('<img src="../../img/'+d.info[0].desk_img+'"/>');if(pageName==="fbcheckin"){$("#Content .container #BU_Login_rule").on("click",function(){window.open("https://www.facebook.com/LGTaiwan/posts/1252733401406491")})}},"json")}}else{window.location.href="/"}},"json")}});function remindShow(){$("#remind #popup #scollInfo").jScrollPane();$("#remind").show();$("#remind #popup #scollInfo #scroll_Close").on("click",function(){$("#remind").hide()})}function getWindowSize(){windowWidth=$(window).width();windowHeight=$(window).height()}function toNumber(a){return +a}function RedirNonHttps(){if(location.href.indexOf("https://")==-1){location.href=location.href.replace("http://","https://")}}function getUrlParam(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)");var c=window.location.search.substr(1).match(b);if(c!==null){return unescape(c[2])}return null}function GEvent(b){var a="【"+eventCode+"】("+pageName+") ";console.log(a+b);ga("send","event","button","click",a+b)};